<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Mapa SJM - Segmenta√ß√£o por Bairro</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- Mapa -->
  <div id="map"></div>

  <!-- Adicionando barra de pesquisa no canto superior direito -->
  <div class="search-container">
    <input type="text" id="searchInput" class="search-input" placeholder="Pesquisar institui√ß√£o..." autocomplete="off" inputmode="text">
    <div id="searchSuggestions" class="search-suggestions hidden"></div>
  </div>

  <!-- Adicionando bot√£o de fullscreen no canto inferior esquerdo -->
  <div class="fullscreen-control">
    <button id="fullscreenBtn" class="fullscreen-btn" title="Tela cheia">‚õ∂</button>
  </div>

  <!-- Adicionando controles de zoom customizados no canto inferior direito -->
  <div class="custom-zoom-controls">
    <button id="zoomIn" class="zoom-btn">+</button>
    <button id="zoomOut" class="zoom-btn">‚àí</button>
  </div>

  <!-- Novo menu lateral estilizado como Google Maps -->
  <div id="menu" class="menu-lateral">
    <!-- Cabe√ßalho do menu -->
    <div class="menu-header">
      <button id="menuToggle" class="menu-toggle">‚ò∞</button>
      <div class="menu-title">
        <h1>An√°lise Geoespacial SJM</h1>
        <p>Planejamento e Inova√ß√£o</p>
      </div>
    </div>

    <!-- Informa√ß√µes do mapa -->
    <div class="menu-info">
      <p class="info-views">An√°lise Descritiva do Mapa</p>
      <div class="menu-actions">
        <a class="action-btn" href="https://app.powerbi.com/view?r=eyJrIjoiNDlhZWQ0MDItNjQ0MC00NjA4LTkwZGMtNDBlMDQwNTZlYTVmIiwidCI6IjE0MmE5MmM3LWMxNjctNGY1Ny05MDg3LTM3ZWVlMGQ0MjA2YyJ9" target="_blank" rel="noopener noreferrer">ABRIR RELAT√ìRIO</a>
      </div>
    </div>

    <!-- Conte√∫do do menu -->
    <div class="menu-content">

      <!-- Se√ß√£o Bairros -->
      <div class="menu-section">
        <div class="section-header" data-section="bairros">
          <input type="checkbox" id="toggleBairros" class="section-checkbox" checked>
          <span class="section-icon">‚ñº</span>
          <span class="section-title">Bairros</span>
        </div>
        <div id="bairrosContainer" class="section-content">
          <!-- Checkboxes ser√£o preenchidos dinamicamente -->
        </div>
      </div>

      <!-- Se√ß√£o Educa√ß√£o -->
      <div class="menu-section">
        <div class="section-header" data-section="educacao">
          <input type="checkbox" id="toggleEducacao" class="section-checkbox">
          <span class="section-icon">‚ñº</span>
          <span class="section-title">Educa√ß√£o</span>
        </div>
        <div id="educacaoContainer" class="section-content">
          <label class="layer-item">
            <input type="checkbox" id="toggleCreches" class="layer-checkbox">
            <span class="layer-icon" style="background-color: #d43c3c;"></span>
            <span class="layer-name">Creches</span>
          </label>
          <label class="layer-item">
            <input type="checkbox" id="toggleEscolas" class="layer-checkbox">
            <span class="layer-icon" style="background-color: #4ecdc4;"></span>
            <span class="layer-name">Escolas</span>
          </label>
          <label class="layer-item">
            <input type="checkbox" id="toggleEscolasEstaduais" class="layer-checkbox">
            <span class="layer-icon" style="background-color: #1e88e5;"></span>
            <span class="layer-name">Escolas Estaduais</span>
          </label>
          <label class="layer-item">
            <input type="checkbox" id="toggleEscolasParticulares" class="layer-checkbox">
            <span class="layer-icon" style="background-color: #9c27b0;"></span>
            <span class="layer-name">Escolas Particulares</span>
          </label>
          <label class="layer-item">
            <input type="checkbox" id="toggleNovasConstrucoes" class="layer-checkbox">
            <span class="layer-icon" style="background-color: #ffa500;"></span>
            <span class="layer-name">Novas Constru√ß√µes</span>
          </label>
          
          <!-- Adicionando bot√£o de filtros -->
          <div class="filter-section">
            <button id="toggleFilters" class="filter-toggle-btn">
              üîç Filtrar Institui√ß√µes
            </button>
            <div id="filtersContainer" class="filters-container hidden">
              <div class="filter-group">
                <label class="filter-label">Filtrar por Bairro:</label>
                <select id="filterBairro" class="filter-select">
                  <option value="">Todos os Bairros</option>
                </select>
              </div>
              <div class="filter-group">
                <label class="filter-label">Filtrar por Polo:</label>
                <select id="filterPolo" class="filter-select">
                  <option value="">Todos os Polos</option>
                </select>
              </div>
              <!-- Adicionando filtro por quantidade m√≠nima de alunos -->
              <div class="filter-group">
                <label class="filter-label">Quantidade M√≠nima de Alunos:</label>
                <input type="number" id="filterAlunos" class="filter-input" placeholder="Ex: 100" min="0">
              </div>
              <button id="clearFilters" class="clear-filters-btn">Limpar Filtros</button>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

  <!-- Adicionando card de preview de imagem no canto inferior direito -->
  <div id="imagePreview" class="image-preview-card hidden">
    <button id="closeImagePreview" class="close-preview-btn">‚úï</button>
    <img id="previewImage" src="/placeholder.svg" alt="Imagem da institui√ß√£o">
    <div id="previewTitle" class="preview-title"></div>
  </div>

  <!-- Adicionando modal de fullscreen para imagens -->
  <div id="imageFullscreen" class="image-fullscreen-overlay hidden">
    <button id="closeImageFullscreen" class="image-fullscreen-close">‚úï</button>
    <img id="fullscreenImage" src="/placeholder.svg" alt="Imagem em tela cheia">
  </div>

  <!-- Adding error popup modal for addresses outside S√£o Jo√£o de Meriti -->
  <div id="errorPopup" class="error-popup-overlay hidden">
    <div class="error-popup-container">
      <button id="closeErrorPopup" class="error-popup-close">‚úï</button>
      <img src="../Include/Img/popup-erro.png" alt="Erro" class="error-popup-image">
    </div>
  </div>

  <!-- Adding modal container for children data summary -->
  <div id="childrenDataModal" class="children-data-modal-overlay hidden">
    <div class="children-data-modal-content">
      <div class="children-data-modal-header">
        <h3 id="childrenDataTitle">Sum√°rio de Crian√ßas</h3>
        <button id="closeChildrenDataModal" class="children-data-modal-close">‚úï</button>
      </div>
      <div class="children-data-modal-body">
        <div id="childrenDataTableContainer"></div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="script.js"></script>
</body>
</html>
