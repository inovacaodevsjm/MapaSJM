<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>GeoSJM - Sistema de Informa√ß√µes Geogr√°ficas</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
  
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <div id="map"></div>

  <div class="custom-zoom-controls">
    <button id="zoomIn" class="zoom-btn" title="Aumentar Zoom">+</button>
    <button id="zoomOut" class="zoom-btn" title="Diminuir Zoom">‚àí</button>
  </div>

  <div class="fullscreen-control">
    <button id="fullscreenBtn" class="fullscreen-btn" title="Tela cheia">‚õ∂</button>
  </div>

  <div id="menu" class="menu-lateral">
    
    <div class="menu-header">
      <div class="header-content">
        <div class="gov-title">PREFEITURA DE</div>
        <div class="city-title">S√ÉO JO√ÉO DE MERITI</div>
        <div class="system-subtitle">An√°lise Geoespacial & Planejamento</div>
      </div>
      <button id="menuToggle" class="menu-toggle" title="Recolher Menu">‚ò∞</button>
    </div>

    <div class="menu-scroll-container">
      
      <div class="search-section">
        <div class="search-wrapper">
          <input type="text" id="searchInput" class="search-input" placeholder="Buscar endere√ßo ou institui√ß√£o..." autocomplete="off" inputmode="text">
          <span class="search-icon">üîç</span>
        </div>
        <div id="searchSuggestions" class="search-suggestions hidden"></div>
      </div>

      <div class="menu-info-bar">
        <a class="info-btn" href="https://app.powerbi.com/view?r=eyJrIjoiNDlhZWQ0MDItNjQ0MC00NjA4LTkwZGMtNDBlMDQwNTZlYTVmIiwidCI6IjE0MmE5MmM3LWMxNjctNGY1Ny05MDg3LTM3ZWVlMGQ0MjA2YyJ9" target="_blank" rel="noopener noreferrer">
          <span class="icon">üìä</span> Acessar Relat√≥rio BI
        </a>
      </div>

      <div class="menu-content">

        <div class="menu-section">
          <div class="section-header collapsed" data-section="mapStyle">
            <span class="section-indicator" style="background-color: #6c757d;"></span>
            <span class="section-title">Visualiza√ß√£o do Mapa</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div id="mapStyleContainer" class="section-content collapsed">
             <label class="layer-item">
               <input type="radio" name="baseLayer" value="padrao" checked class="layer-radio">
               <span class="layer-name">Padr√£o (Ruas)</span>
             </label>
             <label class="layer-item">
               <input type="radio" name="baseLayer" value="satelite" class="layer-radio">
               <span class="layer-name">Sat√©lite (Imagem A√©rea)</span>
             </label>
             <label class="layer-item">
               <input type="radio" name="baseLayer" value="clean" class="layer-radio">
               <span class="layer-name">Clean (Cinza Claro)</span>
             </label>
          </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="bairros">
            <span class="section-indicator"></span>
            <span class="section-title">Divis√£o Territorial</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
             <label class="toggle-all-label">
                <input type="checkbox" id="toggleBairros" checked> Exibir Bairros
             </label>
          </div>
          <div id="bairrosContainer" class="section-content collapsed">
            </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="educacao">
            <span class="section-indicator" style="background-color: #003399;"></span>
            <span class="section-title">Rede de Educa√ß√£o</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleMunicipal"> Exibir Municipal
            </label>
            <label class="toggle-all-label" style="margin-left: 15px;">
               <input type="checkbox" id="toggleOutros"> Exibir Outros
            </label>
         </div>
          <div id="educacaoContainer" class="section-content collapsed">
            <!-- Aba Municipal -->
            <div class="submenu-section">
              <div class="submenu-header collapsed" data-submenu="municipal">
                <span class="submenu-title">Municipal</span>
                <span class="submenu-icon">‚ñº</span>
              </div>
              <div id="municipalContainer" class="submenu-content collapsed">
                <label class="layer-item">
                  <input type="checkbox" id="toggleCreches" class="layer-checkbox municipal-layer">
                  <span class="layer-symbol" style="background-color: #d43c3c;"></span>
                  <span class="layer-name">Creches</span>
                </label>
                <label class="layer-item">
                  <input type="checkbox" id="toggleEscolas" class="layer-checkbox municipal-layer">
                  <span class="layer-symbol" style="background-color: #4ecdc4;"></span>
                  <span class="layer-name">Escolas Municipais</span>
                </label>
              </div>
            </div>
            
            <!-- Aba Outros -->
            <div class="submenu-section">
              <div class="submenu-header collapsed" data-submenu="outros">
                <span class="submenu-title">Outros</span>
                <span class="submenu-icon">‚ñº</span>
              </div>
              <div id="outrosContainer" class="submenu-content collapsed">
                <label class="layer-item">
                  <input type="checkbox" id="toggleEscolasEstaduais" class="layer-checkbox outros-layer">
                  <span class="layer-symbol" style="background-color: #1e88e5;"></span>
                  <span class="layer-name">Escolas Estaduais</span>
                </label>
                <label class="layer-item">
                  <input type="checkbox" id="toggleEscolasParticulares" class="layer-checkbox outros-layer">
                  <span class="layer-symbol" style="background-color: #9c27b0;"></span>
                  <span class="layer-name">Escolas Particulares</span>
                </label>
              </div>
            </div>
            
            <!-- Se√ß√£o Pr√≥ximas Entregas -->
            <div class="submenu-section">
              <div class="submenu-header" data-submenu="proximasEntregas">
                <input type="checkbox" id="toggleProximasEntregas" class="layer-checkbox">
                <span class="submenu-title">Proximas Entregas</span>
                <span class="submenu-icon">‚ñº</span>
              </div>
              <div id="proximasEntregasContainer" class="submenu-content collapsed">
                <!-- Subcamadas por mes serao preenchidas dinamicamente -->
              </div>
            </div>
            
            <div class="filter-box">
              <button id="toggleFilters" class="filter-toggle-btn">
                <span>Filtrar Dados</span> <span>‚ñº</span>
              </button>
              <div id="filtersContainer" class="filters-container hidden">
                <div class="filter-row">
                  <label>Bairro:</label>
                  <select id="filterBairro" class="filter-select"><option value="">Todos</option></select>
                </div>
                <div class="filter-row">
                  <label>Polo:</label>
                  <select id="filterPolo" class="filter-select"><option value="">Todos</option></select>
                </div>
                <div class="filter-row">
                  <label>M√≠n. Alunos:</label>
                  <input type="number" id="filterAlunos" class="filter-input" placeholder="0" min="0">
                </div>
                <button id="clearFilters" class="clear-filters-btn">Limpar Filtros</button>
              </div>
            </div>
          </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="saude">
            <span class="section-indicator" style="background-color: #e6194b;"></span>
            <span class="section-title">Rede de Sa√∫de</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleSaude"> Exibir Todos
            </label>
         </div>
          <div id="saudeContainer" class="section-content collapsed">
            
            <!-- Se√ß√£o Pr√≥ximas Entregas Sa√∫de -->
            <div class="submenu-section">
              <div class="submenu-header" data-submenu="proximasEntregasSaude">
                <input type="checkbox" id="toggleProximasEntregasSaude" class="layer-checkbox">
                <span class="submenu-title">Proximas Entregas</span>
                <span class="submenu-icon">‚ñº</span>
              </div>
              <div id="proximasEntregasSaudeContainer" class="submenu-content collapsed">
                <!-- Subcamadas por mes serao preenchidas dinamicamente -->
              </div>
            </div>
          </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="assistenciaSocial">
            <span class="section-indicator" style="background-color: #8e44ad;"></span>
            <span class="section-title">Assist√™ncia Social</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleAssistenciaSocial"> Exibir Todos
            </label>
         </div>
          <div id="assistenciaSocialContainer" class="section-content collapsed">
            </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="cultura">
            <span class="section-indicator" style="background-color: #e67e22;"></span>
            <span class="section-title">Cultura</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleCultura"> Exibir Todos
            </label>
         </div>
          <div id="culturaContainer" class="section-content collapsed">
            </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="cidadania">
            <span class="section-indicator" style="background-color: #ff9daa;"></span>
            <span class="section-title">Cidadania</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleCidadania"> Exibir Todos
            </label>
         </div>
          <div id="cidadaniaContainer" class="section-content collapsed">
            </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="pracas">
            <span class="section-indicator" style="background-color: #27ae60;"></span>
            <span class="section-title">Pra√ßas e √Åreas de Lazer</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="togglePracas"> Exibir Todos
            </label>
         </div>
          <div id="pracasContainer" class="section-content collapsed">
            </div>
        </div>

        <div class="menu-section">
          <div class="section-header" data-section="trabalho">
            <span class="section-indicator" style="background-color: #2980b9;"></span>
            <span class="section-title">Trabalho e Emprego</span>
            <span class="section-icon">‚ñº</span>
          </div>
          <div class="section-controls">
            <label class="toggle-all-label">
               <input type="checkbox" id="toggleTrabalho"> Exibir Todos
            </label>
         </div>
          <div id="trabalhoContainer" class="section-content collapsed">
            </div>
        </div>

      </div> <div class="menu-settings-section">
        <div class="settings-header">Op√ß√µes de Visualiza√ß√£o</div>
        <div class="setting-item">
          <span class="setting-label">Agrupar Marcadores Pr√≥ximos</span>
          <label class="switch">
            <input type="checkbox" id="clusterToggle">
            <span class="slider round"></span>
          </label>
        </div>
        <p class="setting-desc">Ative para agrupar √≠cones e reduzir a polui√ß√£o visual.</p>
      </div>

      <div class="menu-footer">
        <p>&copy; 2026 Prefeitura de S√£o Jo√£o de Meriti</p>
      </div>

    </div> </div> <div id="imagePreview" class="image-preview-card hidden">
    <div class="card-header">
       <span id="previewTitle" class="card-title">Institui√ß√£o</span>
       <button id="closeImagePreview" class="close-card-btn">‚úï</button>
    </div>
    <div class="card-body">
      <img id="previewImage" src="/placeholder.svg" alt="Imagem da institui√ß√£o">
      <div class="card-hint">Clique na imagem para ampliar</div>
    </div>
  </div>

  <div id="imageFullscreen" class="modal-overlay hidden">
    <button id="closeImageFullscreen" class="modal-close-btn">‚úï</button>
    <img id="fullscreenImage" src="" alt="Visualiza√ß√£o">
  </div>

  <div id="errorPopup" class="modal-overlay hidden">
    <div class="modal-content error-modal">
      <button id="closeErrorPopup" class="modal-close-inner">‚úï</button>
      <img src="../Include/Img/popup-erro.png" alt="Erro" class="error-img">
    </div>
  </div>

  <div id="childrenDataModal" class="modal-overlay hidden">
    <div class="modal-content data-modal">
      <div class="modal-header-gov">
        <h3 id="childrenDataTitle">Dados Demogr√°ficos</h3>
        <button id="closeChildrenDataModal" class="modal-close-gov">‚úï</button>
      </div>
      <div class="modal-body-gov">
        <div id="childrenDataTableContainer"></div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>
  <script src="script.js"></script>
</body>
</html>
